---
title: 2. Reconnaissance
date: 2024-08-02 10:00:00
categories:
  - Pentesting
  - Linux
tags:
  - Pentesting
  - Linux
  - Reconnaissance
toc: true
---

---
Step 2 in a penetration test: Reconnaissance.
Network (for singe and multiple hosts) and OSINT recon.

---
<!-- more -->

<br>

## Prepare your environment
```bash Create a separate directory for the target
# replace 'target'
mkdir -p ~/pentests/target
```

```bash Prepare the environment variables
export NET=10.10.10.0/24
export domain=example.com
export IP=10.10.10.1
export URL=http://$IP
# I don't advice using $URL because you might miss other ports or HTTPS
# Remember to add odd web ports (8080,8000,8008) and https if needed
```

```bash Prepare files and directories
mkdir vulns recon files notes
touch notes/{notes.txt,users.txt,passwords.txt,hashes.txt,creds.txt}
```

<br>

## Network recon

<br>
```bash netdiscover
sudo netdiscover -i eth0 -r $NET
```
```bash fping
fping -a -g $NET 2>/dev/null > recon/hosts
```
```bash masscan
masscan $NET â€“echo > recon/masscan-output.conf
```
```bash nmap
nmap -sn $NET -oA recon/nmap.discovery;
cat recon/nmap.discovery | grep -i report | cut -d' ' -f5 > recon/hosts
```
```bash no man's land
for ip in 30 31 35; do ping -c 1 -W 1 10.10.10.$ip &>/dev/null && echo "10.10.10.$ip is up"; done
```

<br>

## Single host recon
```bash Nmap intelligent scan
# initial scan
nmap -Pn -T4 -p- --open --max-retries 5 --system-dns --stats-every 5s $IP --oA recon/nmap.init
# extract open ports
cat recon/nmap.init.nmap | grep '/.*open'| cut -d '/' -f 1| tr '\n' ', '| sed 's/.$//g' > recon/ports;
# full scan on open ports
sudo nmap -Pn -sV -n -v -A -T4 -p $(cat recon/ports) $IP -oA recon/nmap.alltcp
```
```bash Nmap vuln scan (with open ports)
nmap --script vulners -Pn -sC -sV -v -A -T4 -p $(cat recon/ports) $IP -oA recon/nmap.vuln
```
```bash Nmap UDP scan (takes long)
nmap -sCVU -n -F -T4 $IP -oA recon/nmap.udp
```
```bash Nmap IPv6 scan
ping -6 $IP
dig AAAA $domain

nmap -p- -6 --min-rate 10000 $IPv6
<br>

```bash Rustscan
rustscan -a $IP --ulimit 5000 --batch-size 2500 -- -sC -sV -v -oN recon/rustscan.init
```

```bash Autorecon
autorecon -v --heartbeat 10
```

```bash Zenmap (GUI interface)
zenmap 
```

```bash Legion (GUI interface)
sudo legion
```
<br>

```bash no man's land
for ip in 30 31 35; do
    echo "Scanning 10.10.10.$ip"
    for port in {1..65535}; do
        (echo > /dev/tcp/10.10.10.$ip/$port) &>/dev/null && echo "Port $port is open on 10.10.10.$ip"
    done
done
```


<br>

## OSINT recon

```bash
recon-ng
```

<br>

---
---
